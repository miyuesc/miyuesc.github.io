import{c as i,b as t,a as n,g as r}from"../tiny-svg/tiny-svg.9f6d78cc.js";import{q as e}from"../min-dom/min-dom.04e3f566.js";import{aO as a,g as s,aP as o}from"../diagram-js/diagram-js.de1051b7.js";var c=1e5,v=1e5;function g(i,t){this._canvas=i,this._visible=!1;var n=this;t.on("diagram.init",(function(){n._init()})),t.on("gridSnapping.toggle",(function(i){var t=i.active;n.toggle(t),n._centerGridAroundViewbox()})),t.on("canvas.viewbox.changed",(function(i){var t=i.viewbox;n._centerGridAroundViewbox(t)}))}g.prototype._init=function(){var r=e("defs",this._canvas._svg);r||(r=i("defs"),t(this._canvas._svg,r));var s=this._pattern=i("pattern"),o="djs-grid-pattern-"+Math.trunc(1e6*Math.random());n(s,{id:o,width:a,height:a,patternUnits:"userSpaceOnUse"});var g=this._circle=i("circle");n(g,{cx:.5,cy:.5,r:.5,fill:"#ccc"}),t(s,g),t(r,s);var _=this._gfx=i("rect");n(_,{x:-c/2,y:-v/2,width:c,height:v,fill:`url(#${o})`})},g.prototype._centerGridAroundViewbox=function(i){i||(i=this._canvas.viewbox());var t=s(i);n(this._gfx,{x:-c/2+o(t.x,a),y:-v/2+o(t.y,a)})},g.prototype.isVisible=function(){return this._visible},g.prototype.toggle=function(i){if(void 0===i&&(i=!this._visible),i!==this._visible){var n=this._getParent();i?t(n,this._gfx):r(n),this._visible=i}},g.prototype._getParent=function(){return this._canvas.getLayer("djs-grid",-2)},g.$inject=["canvas","eventBus"];var _={__init__:["grid"],grid:["type",g]};export{_ as i};
