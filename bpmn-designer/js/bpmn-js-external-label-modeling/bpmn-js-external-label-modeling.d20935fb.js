import{M as e,h as t,g as n,a as r,i as o,s as i}from"../bpmn-js/bpmn-js.1a4fc3a3.js";import{i as a}from"../diagram-js/diagram-js.9682092f.js";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var l={width:0,height:0},u=function(){function e(e,t,n){this._modeling=e,this._textRenderer=t,this._bpmnFactory=n}return e.prototype.preExecute=function(e){var r=e.element,o=r.businessObject,i=e.newLabel;if(!a(r)&&!t(r)&&!p(i)){var s=n(r);s={x:s.x,y:s.y+7},this._modeling.createLabel(r,s,{id:o.id+"_label",businessObject:o,di:r.di})}},e.prototype.execute=function(e){return e.oldLabel=r(e.element),c(e.element,e.newLabel)},e.prototype.revert=function(e){return c(e.element,e.oldLabel)},e.prototype.postExecute=function(e){var t=e.element,n=t.label||t,i=e.hints||{},s=e.newLabel,u=e.newBounds;if(a(n)||o(n,"bpmn:TextAnnotation"))if(a(n)&&p(s))!1!==i.removeShape&&this._modeling.removeShape(n,{unsetLabel:!1});else{var c=r(t);void 0===u&&(u=this._textRenderer.getExternalLabelBounds(n,c)),u&&this._modeling.resizeShape(n,u,l)}},e}();function c(e,t){var n=e.label||e,r=e.labelTarget||e;return i(n,t),[n,r]}function p(e){return!e||!e.trim()}u.$inject=["modeling","textRenderer","bpmnFactory"];var m=function(t){function n(e,n,r,o){return t.call(this,e,n,r,o)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,t),n.prototype.getHandlers=function(){var t=e.prototype.getHandlers.call(this);return t["element.updateLabel"]=u,t},n}(e);m.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];var d={modeling:["type",m]};export{d as m};
